# Data+MQEncoding

```
.mq_autoString
```

Data转String, 自动识别文本编码。(SwiftPM 导入无法使用)

由于使用了`Create ML`, 所以只能在iOS11及其以上版本使用。

(tflite理论上可以兼容更多版本, 懒...)

如果直接从二进制数据判断编码, 那就是100+的多分类问题, 如何设计设计输入是个很头疼的问题, 对于某些编码转换结果, 猜测会由于输入或设计时缺少语义信息, 导致最终结果为乱码却没有过滤掉。

(以上半属胡说八道, 归根结底就是懒。哦不, 是奥卡姆剃刀!)

为了速度考虑, 先截取部分内容, 空格回车这种自ascii就存在的玩意可以作为不错的分界线。判断转码后文本是否为乱码决定编码的可用与否。

第一轮筛选的特征主要使用系统自带的分词

第二轮加入私用区字符与无中断空格

由于正常文本可能存在极其少量的私用区字符, 检查阀值为2/3

由于即使局部解码成功, 也会存在全文解码失败的情况, 第二轮检查为全文解码

由于相关方法的泛用性不大, 暂时没有开放, 先用这个方法吧